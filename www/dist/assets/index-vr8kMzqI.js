var Y=Object.defineProperty;var j=(a,t,e)=>t in a?Y(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var A=(a,t,e)=>j(a,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=e(s);fetch(s.href,l)}})();const _="modulepreload",F=function(a){return"/"+a},W={},O=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),h=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));s=Promise.allSettled(e.map(o=>{if(o=F(o),o in W)return;W[o]=!0;const r=o.endsWith(".css"),m=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${m}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":_,r||(c.as="script"),c.crossOrigin="",c.href=o,h&&c.setAttribute("nonce",h),document.head.appendChild(c),r)return new Promise((d,u)=>{c.addEventListener("load",d),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})}))}function l(n){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=n,window.dispatchEvent(h),!h.defaultPrevented)throw n}return s.then(n=>{for(const h of n||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var M;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(M||(M={}));class R extends Error{constructor(t,e,i){super(t),this.message=t,this.code=e,this.data=i}}const V=a=>{var t,e;return a!=null&&a.androidBridge?"android":!((e=(t=a==null?void 0:a.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||e===void 0)&&e.bridge?"ios":"web"},K=a=>{const t=a.CapacitorCustomPlatform||null,e=a.Capacitor||{},i=e.Plugins=e.Plugins||{},s=()=>t!==null?t.name:V(a),l=()=>s()!=="web",n=c=>{const d=r.get(c);return!!(d!=null&&d.platforms.has(s())||h(c))},h=c=>{var d;return(d=e.PluginHeaders)===null||d===void 0?void 0:d.find(u=>u.name===c)},o=c=>a.console.error(c),r=new Map,m=(c,d={})=>{const u=r.get(c);if(u)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),u.proxy;const p=s(),g=h(c);let w;const z=async()=>(!w&&p in d?w=typeof d[p]=="function"?w=await d[p]():w=d[p]:t!==null&&!w&&"web"in d&&(w=typeof d.web=="function"?w=await d.web():w=d.web),w),T=(f,y)=>{var b,x;if(g){const S=g==null?void 0:g.methods.find(v=>y===v.name);if(S)return S.rtype==="promise"?v=>e.nativePromise(c,y.toString(),v):(v,B)=>e.nativeCallback(c,y.toString(),v,B);if(f)return(b=f[y])===null||b===void 0?void 0:b.bind(f)}else{if(f)return(x=f[y])===null||x===void 0?void 0:x.bind(f);throw new R(`"${c}" plugin is not implemented on ${p}`,M.Unimplemented)}},P=f=>{let y;const b=(...x)=>{const S=z().then(v=>{const B=T(v,f);if(B){const I=B(...x);return y=I==null?void 0:I.remove,I}else throw new R(`"${c}.${f}()" is not implemented on ${p}`,M.Unimplemented)});return f==="addListener"&&(S.remove=async()=>y()),S};return b.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(b,"name",{value:f,writable:!1,configurable:!1}),b},k=P("addListener"),L=P("removeListener"),C=(f,y)=>{const b=k({eventName:f},y),x=async()=>{const v=await b;L({eventName:f,callbackId:v},y)},S=new Promise(v=>b.then(()=>v({remove:x})));return S.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await x()},S},E=new Proxy({},{get(f,y){switch(y){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?C:k;case"removeListener":return L;default:return P(y)}}});return i[c]=E,r.set(c,{name:c,proxy:E,platforms:new Set([...Object.keys(d),...g?[p]:[]])}),E};return e.convertFileSrc||(e.convertFileSrc=c=>c),e.getPlatform=s,e.handleError=o,e.isNativePlatform=l,e.isPluginAvailable=n,e.registerPlugin=m,e.Exception=R,e.DEBUG=!!e.DEBUG,e.isLoggingEnabled=!!e.isLoggingEnabled,e},Z=a=>a.Capacitor=K(a),H=Z(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),D=H.registerPlugin;class U{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,e){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(e);const l=this.windowListeners[t];l&&!l.registered&&this.addWindowListener(l),i&&this.sendRetainedArgumentsForEvent(t);const n=async()=>this.removeListener(t,e);return Promise.resolve({remove:n})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,e,i){const s=this.listeners[t];if(!s){if(i){let l=this.retainedEventArguments[t];l||(l=[]),l.push(e),this.retainedEventArguments[t]=l}return}s.forEach(l=>l(e))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,e){this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:i=>{this.notifyListeners(e,i)}}}unimplemented(t="not implemented"){return new H.Exception(t,M.Unimplemented)}unavailable(t="not available"){return new H.Exception(t,M.Unavailable)}async removeListener(t,e){const i=this.listeners[t];if(!i)return;const s=i.indexOf(e);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const e=this.retainedEventArguments[t];e&&(delete this.retainedEventArguments[t],e.forEach(i=>{this.notifyListeners(t,i)}))}}const $=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),X=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class J extends U{async getCookies(){const t=document.cookie,e={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[s,l]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=X(s).trim(),l=X(l).trim(),e[s]=l}),e}async setCookie(t){try{const e=$(t.key),i=$(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,l=(t.path||"/").replace("path=",""),n=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${i||""}${s}; path=${l}; ${n};`}catch(e){return Promise.reject(e)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}D("CapacitorCookies",{web:()=>new J});const Q=async a=>new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{const s=i.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>e(s),i.readAsDataURL(a)}),N=(a={})=>{const t=Object.keys(a);return Object.keys(a).map(s=>s.toLocaleLowerCase()).reduce((s,l,n)=>(s[l]=a[t[n]],s),{})},tt=(a,t=!0)=>a?Object.entries(a).reduce((i,s)=>{const[l,n]=s;let h,o;return Array.isArray(n)?(o="",n.forEach(r=>{h=t?encodeURIComponent(r):r,o+=`${l}=${h}&`}),o.slice(0,-1)):(h=t?encodeURIComponent(n):n,o=`${l}=${h}`),`${i}&${o}`},"").substr(1):null,et=(a,t={})=>{const e=Object.assign({method:a.method||"GET",headers:a.headers},t),s=N(a.headers)["content-type"]||"";if(typeof a.data=="string")e.body=a.data;else if(s.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[n,h]of Object.entries(a.data||{}))l.set(n,h);e.body=l.toString()}else if(s.includes("multipart/form-data")||a.data instanceof FormData){const l=new FormData;if(a.data instanceof FormData)a.data.forEach((h,o)=>{l.append(o,h)});else for(const h of Object.keys(a.data))l.append(h,a.data[h]);e.body=l;const n=new Headers(e.headers);n.delete("content-type"),e.headers=n}else(s.includes("application/json")||typeof a.data=="object")&&(e.body=JSON.stringify(a.data));return e};class it extends U{async request(t){const e=et(t,t.webFetchExtra),i=tt(t.params,t.shouldEncodeUrlParams),s=i?`${t.url}?${i}`:t.url,l=await fetch(s,e),n=l.headers.get("content-type")||"";let{responseType:h="text"}=l.ok?t:{};n.includes("application/json")&&(h="json");let o,r;switch(h){case"arraybuffer":case"blob":r=await l.blob(),o=await Q(r);break;case"json":o=await l.json();break;case"document":case"text":default:o=await l.text()}const m={};return l.headers.forEach((c,d)=>{m[d]=c}),{data:o,headers:m,status:l.status,url:l.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}D("CapacitorHttp",{web:()=>new it});const q=D("Motion",{android:()=>O(()=>import("./web-DA_sV1NX.js"),[]).then(a=>new a.MotionWeb),ios:()=>O(()=>import("./web-DA_sV1NX.js"),[]).then(a=>new a.MotionWeb),web:()=>O(()=>import("./web-DA_sV1NX.js"),[]).then(a=>new a.MotionWeb)});class G{constructor(){A(this,"stopAcceleration",()=>{this.accelHandler&&this.accelHandler.remove()});A(this,"removeListeners",()=>{q.removeAllListeners()});if(!G.isCompatibleBrowser()){this.showCompatibilityWarning();return}this.canvas=document.getElementById("gameCanvas");try{if(this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("Failed to get canvas context")}catch(t){console.error("Canvas initialization error:",t),this.showCompatibilityWarning();return}this.startPage=document.getElementById("startPage"),this.startGameButton=document.getElementById("startGameButton"),this.pauseButton=document.getElementById("pauseButton"),this.modeBackButton=document.getElementById("modeBackButton"),this.backButton=document.getElementById("backButton"),this.accelHandler,this.clearInvalidData(),this.isPlaying=!1,this.ball={x:0,y:0,radius:10,velocity:{x:0,y:0},acceleration:{x:0,y:0}},this.resetGameState(),this.language=localStorage.getItem("mazeGameLanguage")||"en",this.translations={en:{start:"Start Game",pause:"Pause",reset:"Reset",level:"Level",permissionText:"Game needs device orientation access",levelComplete:"Level Complete!"},zh:{start:"ÂºÄÂßãÊ∏∏Êàè",pause:"ÊöÇÂÅú",reset:"ÈáçÁΩÆ",level:"ÂÖ≥Âç°",permissionText:"Ê∏∏ÊàèÈúÄË¶ÅËÆøÈóÆËÆæÂ§áÊñπÂêëÊÑüÂ∫îÊùÉÈôê",levelComplete:"ËøáÂÖ≥ÔºÅ"}},this.specialLevels=["fog","antiGravity","lightning","breadcrumb","key","fakeExit"],this.currentSpecialLevel=null,this.lightningTimer=0,this.lightningDuration=1e3,this.nextLightning=this.getRandomLightningInterval(),this.hasKey=!1,this.keyPosition={x:0,y:0},this.fakeExitPosition={x:0,y:0},this.score=0,this.startTime=null,this.totalTime=0,this.completedLevels=0,this.levelTimes=[],this.breadcrumbs=[],this.lastBreadcrumbPosition={x:0,y:0},this.gameMode=null,this.timeLeft=3e4,this.countdownElement=document.getElementById("timeLeft"),this.countdownContainer=document.getElementById("countdown"),this.modeSelect=document.getElementById("modeSelect"),this.challengeModeButton=document.getElementById("challengeModeButton"),this.infiniteModeButton=document.getElementById("infiniteModeButton"),this.lastUpdateTime=null,this.isGameOver=!1,this.skills={wallPass:{id:"wallPass",type:"active",name:"Wall Pass",uses:3,icon:"‚û°Ô∏è",description:"Pass through a wall in the direction closest to gravity",effect:this.useWallPass.bind(this)},timeStop:{type:"active",name:"Time Stop",uses:3,icon:"‚è∏Ô∏è",description:"Stop countdown for 5 seconds",effect:()=>this.useTimeStop()},globalLight:{type:"active",name:"Global Light",uses:3,icon:"üí°",description:"Light up the entire maze for 5 seconds",effect:()=>this.useGlobalLight()},teleport:{type:"active",name:"Teleport",uses:3,icon:"üîÑ",description:"Teleport to a position with shorter straight-line distance to exit",effect:()=>this.useTeleport()},speedBoost:{type:"passive",name:"Speed Boost",icon:"‚ö°",description:"Increase movement speed by 5%",effect:()=>this.applySpeedBoost()},timeBoots:{type:"passive",name:"Time Boots",icon:"‚è±Ô∏è",description:"Gain 0.02s for each cell moved",effect:()=>this.applyTimeBoots()},cornerSlow:{type:"passive",name:"Corner Slow",icon:"‚úö",description:"Slow down by 10% at intersections",effect:()=>this.applyCornerSlow()}},this.skillSlots=[null,null],this.activeSkillEffects={timeStopActive:!1,globalLightActive:!1,timeStopRemaining:0,globalLightRemaining:0},this.skillSelectionLevel=6,this.skillSelectionActive=!1,this.ballTypes={normal:{radius:10,mass:1,sensitivity:1,color:"#000"},heavy:{radius:11.5,mass:1.15,sensitivity:.6,color:"#333"},light:{radius:5,mass:.5,sensitivity:1.2,color:"#666"}},this.selectedBallType="normal",this.init()}static isCompatibleBrowser(){const t=navigator.userAgent.toLowerCase(),e=t.indexOf("micromessenger")!==-1,i=t.indexOf("mqqbrowser")!==-1,s=t.indexOf("inapp")!==-1;return!(e||i||s)}init(){this.startGameButton.addEventListener("click",async()=>{try{await DeviceMotionEvent.requestPermission()}catch(e){console.error(e);return}this.bindOrientationEvents(),this.showModeSelect(),this.accelHandler=await q.addListener("accel",e=>{})}),this.challengeModeButton.addEventListener("click",()=>this.startGame("challenge")),this.infiniteModeButton.addEventListener("click",()=>this.startGame("infinite")),this.modeBackButton.addEventListener("click",()=>this.returnToStart());const t=document.getElementsByClassName("skill-slot");Array.from(t).forEach((e,i)=>{e.addEventListener("click",()=>this.useSkill(i))}),this.backButton.addEventListener("click",()=>this.confirmBack()),this.initBallSelector()}initBallSelector(){const t=document.querySelector(".ball-carousel");document.querySelectorAll(".ball-container");const e=document.querySelectorAll(".dot");let i=0,s=0,l=0;t.addEventListener("touchstart",n=>{i=n.touches[0].clientX,s=t.scrollLeft}),t.addEventListener("touchmove",n=>{const h=n.touches[0].clientX,o=(i-h)*2;t.scrollLeft=s+o}),t.addEventListener("touchend",()=>{const n=t.offsetWidth,h=Math.round(t.scrollLeft/n);l=Math.max(0,Math.min(h,2)),this.selectedBallType=Object.keys(this.ballTypes)[l],e.forEach((o,r)=>{o.classList.toggle("active",r===l)}),t.scrollTo({left:l*n,behavior:"smooth"})})}async requestPermission(){try{await DeviceOrientationEvent.requestPermission()==="granted"?(this.permissionPrompt.style.display="none",this.bindOrientationEvents()):alert("ÈúÄË¶ÅÈáçÂäõÊÑüÂ∫îÊùÉÈôêÊâçËÉΩÁé©Ê∏∏Êàè")}catch(t){console.error("ÊùÉÈôêËØ∑Ê±ÇÂ§±Ë¥•:",t),alert("ÊùÉÈôêËØ∑Ê±ÇÂ§±Ë¥•")}}bindOrientationEvents(){window.addEventListener("deviceorientation",t=>{if(!this.isPlaying)return;const e=.03,i=this.ballTypes[this.selectedBallType].sensitivity,s=this.currentSpecialLevel==="antiGravity"?-1:1;this.ball.acceleration.x=t.gamma*e*i*s,this.ball.acceleration.y=t.beta*e*i*s})}showModeSelect(){this.startPage.style.display="none",this.modeSelect.style.display="flex",this.modeBackButton.style.display="flex"}startGame(t){this.gameMode=t,this.isPlaying=!0,this.isGameOver=!1,this.modeSelect.style.display="none",this.modeSelect.style.display="none",document.getElementById("game-container").style.display="flex",this.canvas.style.display="block",document.getElementById("startButton").style.display="none",t==="infinite"?this.backButton.style.display="block":this.backButton.style.display="none",this.resetGameState(),this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),this.resetBall(),this.generateMaze(),t==="challenge"?(this.countdownContainer.style.display="block",document.getElementById("skillSlots").style.display="block",this.timeLeft=3e4,this.lastUpdateTime=Date.now(),this.updateCountdown()):(this.countdownContainer.style.display="none",document.getElementById("skillSlots").style.display="none"),this.startTime=Date.now(),this.gameLoop()}pauseGame(){this.isPlaying=!1,this.startGameButton.style.display="block",this.pauseButton.style.display="none"}resetBall(){this.ball.x=1.5*this.cellSize,this.ball.y=1.5*this.cellSize,this.ball.velocity={x:0,y:0},this.ball.acceleration={x:0,y:0};const t=this.ballTypes[this.selectedBallType];this.ball.radius=t.radius,this.ball.mass=t.mass,this.ball.color=t.color}resizeCanvas(){const t=document.getElementById("game-container");this.canvas.width=Math.min(t.clientWidth-20,400),this.canvas.height=Math.min(t.clientHeight*.7,600),this.resetBall()}update(){var n,h;this.ball.velocity.x+=this.ball.acceleration.x,this.ball.velocity.y+=this.ball.acceleration.y;const t=5,e=Math.sqrt(this.ball.velocity.x**2+this.ball.velocity.y**2);if(e>t){const o=t/e;this.ball.velocity.x*=o,this.ball.velocity.y*=o}const i=Math.floor(this.ball.x/this.cellSize),s=Math.floor(this.ball.y/this.cellSize);for(let o=-1;o<=1;o++)for(let r=-1;r<=1;r++){const m=s+o,c=i+r;if(m>=0&&m<this.maze.length&&c>=0&&c<this.maze[0].length&&this.maze[m][c]===1){const d=c*this.cellSize,u=m*this.cellSize,p=Math.max(d,Math.min(this.ball.x,d+this.cellSize)),g=Math.max(u,Math.min(this.ball.y,u+this.cellSize)),w=this.ball.x-p,z=this.ball.y-g,T=Math.sqrt(w*w+z*z);if(T<this.ball.radius){const P=this.ball.radius-T,k=Math.atan2(z,w);this.ball.x+=Math.cos(k)*P,this.ball.y+=Math.sin(k)*P;const L={x:Math.cos(k),y:Math.sin(k)},C=this.ball.velocity.x*L.x+this.ball.velocity.y*L.y,E=.5;this.ball.velocity.x-=2*C*L.x*E,this.ball.velocity.y-=2*C*L.y*E,this.ball.velocity.x*=.9,this.ball.velocity.y*=.9}}}this.gameMode==="challenge"&&(this.activeSkillEffects.timeStopActive&&(this.activeSkillEffects.timeStopRemaining-=16,this.activeSkillEffects.timeStopRemaining<=0&&(this.activeSkillEffects.timeStopActive=!1)),this.activeSkillEffects.globalLightActive&&(this.activeSkillEffects.globalLightRemaining-=16,this.activeSkillEffects.globalLightRemaining<=0&&(this.activeSkillEffects.globalLightActive=!1,this.showEffectEndIndicator())));let l=1;if(this.hasPassiveSkill("speedBoost")&&(l*=1.05),this.hasPassiveSkill("cornerSlow")){const o=Math.floor(this.ball.x/this.cellSize),r=Math.floor(this.ball.y/this.cellSize);this.isIntersection(o,r)&&(l*=.9)}if(this.hasPassiveSkill("timeBoots")){const o=Math.floor(this.ball.x/this.cellSize),r=Math.floor(this.ball.y/this.cellSize);(o!==((n=this.lastCell)==null?void 0:n.x)||r!==((h=this.lastCell)==null?void 0:h.y))&&(this.timeLeft+=20,this.lastCell={x:o,y:r})}if(this.ball.velocity.x*=l,this.ball.velocity.y*=l,this.ball.x+=this.ball.velocity.x,this.ball.y+=this.ball.velocity.y,this.maze[s][i]===3){if(this.currentSpecialLevel==="key"&&!this.hasKey)return;this.levelComplete()}if(this.currentSpecialLevel==="key"&&!this.hasKey){const o=this.ball.x-this.keyPosition.x,r=this.ball.y-this.keyPosition.y;Math.sqrt(o*o+r*r)<this.ball.radius+10&&(this.hasKey=!0)}if(this.currentSpecialLevel==="breadcrumb"){const o=this.ball.x-this.lastBreadcrumbPosition.x,r=this.ball.y-this.lastBreadcrumbPosition.y;Math.sqrt(o*o+r*r)>=5&&(this.breadcrumbs.push({x:this.ball.x,y:this.ball.y}),this.lastBreadcrumbPosition={x:this.ball.x,y:this.ball.y})}}draw(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentSpecialLevel==="key"&&!this.hasKey&&(this.ctx.fillStyle="#000",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.arc(this.keyPosition.x,this.keyPosition.y-5,5,0,Math.PI*2),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.keyPosition.x,this.keyPosition.y-2),this.ctx.lineTo(this.keyPosition.x,this.keyPosition.y+8),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.keyPosition.x,this.keyPosition.y+8),this.ctx.lineTo(this.keyPosition.x+6,this.keyPosition.y+8),this.ctx.moveTo(this.keyPosition.x,this.keyPosition.y+6),this.ctx.lineTo(this.keyPosition.x+4,this.keyPosition.y+6),this.ctx.stroke()),this.currentSpecialLevel==="fakeExit"){const e=this.fakeExitPosition.x*this.cellSize,i=this.fakeExitPosition.y*this.cellSize;this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=2;const s=this.cellSize*.3;this.ctx.arc(e+this.cellSize/2,i+this.cellSize/2,s,0,Math.PI*2),this.ctx.stroke()}if(this.currentSpecialLevel==="fog"||this.currentSpecialLevel==="lightning"||this.currentSpecialLevel==="breadcrumb"){if(this.activeSkillEffects.globalLightActive)this.drawNormalMaze();else if(this.currentSpecialLevel==="fog"){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(let e=0;e<this.maze.length;e++)for(let i=0;i<this.maze[0].length;i++){const s=this.maze[e][i],l=i*this.cellSize,n=e*this.cellSize;if(s===1)this.ctx.fillStyle="#000",this.ctx.fillRect(l,n,this.cellSize,this.cellSize);else if(s===3){this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=2;const h=this.cellSize*.3;this.ctx.arc(l+this.cellSize/2,n+this.cellSize/2,h,0,Math.PI*2),this.ctx.stroke()}}this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle="#000",this.ctx.beginPath(),this.ctx.arc(this.ball.x,this.ball.y,this.ball.radius*10,0,Math.PI*2),this.ctx.fill(),this.ctx.restore(),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.ball.x,this.ball.y,this.ball.radius*10,0,Math.PI*2),this.ctx.clip(),this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}else if(this.currentSpecialLevel==="breadcrumb"){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(let e=0;e<this.maze.length;e++)for(let i=0;i<this.maze[0].length;i++){const s=this.maze[e][i],l=i*this.cellSize,n=e*this.cellSize;s===1&&(this.ctx.fillStyle="#000",this.ctx.fillRect(l,n,this.cellSize,this.cellSize))}if(this.breadcrumbs.length>1)for(let e=0;e<this.breadcrumbs.length;e++)this.ctx.beginPath(),this.ctx.arc(this.breadcrumbs[e].x,this.breadcrumbs[e].y,this.ball.radius*2,0,Math.PI*2),this.ctx.fillStyle="#fff",this.ctx.fill();this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle="#000",this.ctx.beginPath(),this.ctx.arc(this.ball.x,this.ball.y,this.ball.radius*2,0,Math.PI*2),this.ctx.fill(),this.ctx.restore();for(let e=0;e<this.maze.length;e++)for(let i=0;i<this.maze[0].length;i++)if(this.maze[e][i]===3){const s=i*this.cellSize,l=e*this.cellSize;this.ctx.beginPath(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=2;const n=this.cellSize*.3;this.ctx.arc(s+this.cellSize/2,l+this.cellSize/2,n,0,Math.PI*2),this.ctx.stroke()}}else if(this.currentSpecialLevel==="lightning"){const e=Date.now();e-this.lightningTimer>this.nextLightning&&(this.lightningTimer=e,this.nextLightning=this.getRandomLightningInterval()),e-this.lightningTimer<this.lightningDuration||(this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.ball.x,this.ball.y,this.ball.radius*.5,0,Math.PI*2),this.ctx.clip())}else if(this.currentSpecialLevel==="key"){for(let e=0;e<this.maze.length;e++)for(let i=0;i<this.maze[0].length;i++)if(this.maze[e][i]===3){const s=i*this.cellSize,l=e*this.cellSize;this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=2;const n=this.cellSize*.3;this.ctx.arc(s+this.cellSize/2,l+this.cellSize/2,n,0,Math.PI*2),this.ctx.stroke()}}}for(let e=0;e<this.maze.length;e++)for(let i=0;i<this.maze[0].length;i++){const s=this.maze[e][i],l=i*this.cellSize,n=e*this.cellSize;if(this.ctx.fillStyle=s===1?"#000":"#fff",s===1)this.ctx.fillRect(l,n,this.cellSize,this.cellSize);else if(s===3){this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=2;const h=this.cellSize*.3;this.ctx.arc(l+this.cellSize/2,n+this.cellSize/2,h,0,Math.PI*2),this.ctx.stroke()}}(this.currentSpecialLevel==="fog"||this.currentSpecialLevel==="lightning"||this.currentSpecialLevel==="breadcrumb"||this.currentSpecialLevel==="key"||this.currentSpecialLevel==="fakeExit")&&this.ctx.restore(),this.ctx.beginPath(),this.ctx.arc(this.ball.x,this.ball.y,this.ball.radius,0,Math.PI*2),this.currentSpecialLevel==="lightning"&&(this.ctx.strokeStyle="#fff",this.ctx.lineWidth=2,this.ctx.stroke()),this.ctx.fillStyle=this.ball.color,this.ctx.fill(),this.ctx.closePath(),this.ctx.fillStyle="#fff",this.ctx.font="bold 24px Arial";let t=`LEVEL ${this.level}`;this.currentSpecialLevel&&(t+=` - ${{fog:"Fog",antiGravity:"Anti-Gravity",lightning:"Lightning",breadcrumb:"Breadcrumb",key:"Key",fakeExit:"Fake Exit"}[this.currentSpecialLevel]}`),this.ctx.fillText(t,10,30)}gameLoop(){if(this.gameMode==="challenge"&&!this.isGameOver){const t=Date.now();if(this.lastUpdateTime){if(this.activeSkillEffects.timeStopActive||(this.timeLeft-=t-this.lastUpdateTime,this.lastUpdateTime=t),this.timeLeft<=0){this.gameOver();return}this.updateCountdown()}}this.isPlaying&&(this.update(),this.draw(),requestAnimationFrame(()=>this.gameLoop()))}gameOver(){this.isGameOver=!0,this.isPlaying=!1,alert(`Game Over! You reached Level ${this.level}`),this.startPage.style.display="flex",this.startGameButton.style.display="block",this.modeSelect.style.display="none",document.getElementById("game-container").style.display="none",this.countdownContainer.style.display="none",this.skillSlots=[null,null],this.updateSkillSlots(),this.resetGameState()}calculateRewardTime(){const t=Math.floor((this.level-1)/10);let e=8;for(let s=0;s<t;s++)e*=1.1;e=Number(e.toFixed(2));let i=1;if(this.currentSpecialLevel)switch(this.currentSpecialLevel){case"fog":case"lightning":case"fakeExit":i=2;break;case"antiGravity":case"key":i=1.3;break;case"breadcrumb":i=1.6;break}return e*i*1e3}levelComplete(){if(this.gameMode==="challenge"){const i=this.calculateRewardTime();this.timeLeft+=i,this.updateCountdown(),this.checkSkillSelection()}const t=(Date.now()-this.startTime)/1e3;this.levelTimes.push(t);const e=Math.floor(this.levelTimes.reduce((i,s)=>i+s,0)/this.levelTimes.length);if(this.currentSpecialLevel==="antiGravity"&&t<2*e){const i=e*.1;this.totalTime-=i*this.completedLevels}else if(this.currentSpecialLevel==="fog"&&t<5*e){const i=e*.1;this.totalTime-=i*this.completedLevels}this.level++,localStorage.setItem("mazeLevel",this.level),this.level>this.highScore&&(this.highScore=this.level,localStorage.setItem("mazeHighScore",this.highScore)),this.generateMaze()}formatTime(t){const e=Math.floor(t%1*1e3),i=Math.floor(t)%60,s=Math.floor(t/60)%60;return`${Math.floor(t/3600).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${e.toString().padStart(3,"0")}`}getRandomLightningInterval(){return 2e3+Math.random()*2e3}showCompatibilityWarning(){const t=document.createElement("div");t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="white",t.style.padding="20px",t.style.borderRadius="10px",t.style.textAlign="center",t.innerHTML=`
            <p>ËØ∑Âú®Á≥ªÁªüÊµèËßàÂô®‰∏≠ÊâìÂºÄÊ≠§Ê∏∏Êàè</p>
            <p>Please open this game in your system browser</p>
        `,document.body.appendChild(t)}clearInvalidData(){try{const t=parseInt(localStorage.getItem("mazeLevel"));(isNaN(t)||t<1)&&(localStorage.removeItem("mazeLevel"),localStorage.removeItem("mazeHighScore"))}catch{localStorage.clear()}}resetGameState(){this.level=1,this.highScore=parseInt(localStorage.getItem("mazeHighScore"))||0,this.maze=[],this.cellSize=30,this.levelTimes=[],this.totalTime=0,this.completedLevels=0,this.currentSpecialLevel=null,this.endX=0,this.endY=0,this.ball={x:0,y:0,radius:10,velocity:{x:0,y:0},acceleration:{x:0,y:0}},this.hasKey=!1,this.keyPosition={x:0,y:0},this.fakeExitPosition={x:0,y:0},this.skillSlots=[null,null],this.activeSkillEffects={timeStopActive:!1,globalLightActive:!1,timeStopRemaining:0,globalLightRemaining:0}}updateCountdown(){if(this.gameMode!=="challenge")return;const t=Math.floor(this.timeLeft/6e4),e=Math.floor(this.timeLeft%6e4/1e3),i=this.timeLeft%1e3;this.countdownElement.textContent=`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${i.toString().padStart(3,"0")}`}generateMaze(){const i=Math.min(11+Math.floor(this.level/2),25),s=Math.min(15+Math.floor(this.level/2),35);this.maze=Array(s).fill().map(()=>Array(i).fill(1)),this.carvePassages(1,1),this.level>1?(this.maze[this.endY][this.endX]=0,this.ball.x=(this.endX+.5)*this.cellSize,this.ball.y=(this.endY+.5)*this.cellSize):this.resetBall(),this.placeExit(i,s),this.level%3===0?(this.currentSpecialLevel=this.specialLevels[Math.floor(Math.random()*this.specialLevels.length)],this.currentSpecialLevel==="key"?(this.hasKey=!1,this.placeKey()):this.currentSpecialLevel==="fakeExit"&&this.placeFakeExit()):this.currentSpecialLevel=null,this.breadcrumbs=[],this.lastBreadcrumbPosition={x:this.ball.x,y:this.ball.y},this.canvas.width=i*this.cellSize,this.canvas.height=s*this.cellSize}carvePassages(t,e){const i=[[0,2],[2,0],[0,-2],[-2,0]].sort(()=>Math.random()-.5);this.maze[t][e]=0;for(const[s,l]of i){const n=t+s,h=e+l;n>0&&n<this.maze.length-1&&h>0&&h<this.maze[0].length-1&&this.maze[n][h]===1&&(this.maze[t+s/2][e+l/2]=0,this.carvePassages(n,h))}if(Math.random()<.3){const s=i[Math.floor(Math.random()*i.length)],l=t+s[0],n=e+s[1];l>0&&l<this.maze.length-1&&n>0&&n<this.maze[0].length-1&&(this.maze[l][n]=0)}}placeExit(t,e){do this.endY=Math.floor(Math.random()*(e-2))+1,this.endX=Math.floor(Math.random()*(t-2))+1;while(this.maze[this.endY][this.endX]!==0||this.endY<3&&this.endX<3);this.maze[this.endY][this.endX]=3}placeKey(){let t,e;do t=Math.floor(Math.random()*(this.maze[0].length-2))+1,e=Math.floor(Math.random()*(this.maze.length-2))+1;while(this.maze[e][t]!==0||t<3&&e<3||Math.abs(t-this.endX)<2&&Math.abs(e-this.endY)<2);this.keyPosition={x:(t+.5)*this.cellSize,y:(e+.5)*this.cellSize}}placeFakeExit(){let t,e;do t=Math.floor(Math.random()*(this.maze[0].length-2))+1,e=Math.floor(Math.random()*(this.maze.length-2))+1;while(this.maze[e][t]!==0||t<3&&e<3||Math.abs(t-this.endX)<4&&Math.abs(e-this.endY)<4||this.maze[e][t]===3);this.fakeExitPosition={x:t,y:e}}checkSkillSelection(){this.gameMode==="challenge"&&this.level%this.skillSelectionLevel===0&&this.showSkillSelection()}getAvailableSkills(){const t=[];for(const[e,i]of Object.entries(this.skills))i.type==="passive"&&this.skillSlots.some(s=>s&&s.name===i.name)||t.push({...i,id:e});return this.shuffleArray(t).slice(0,2)}shuffleArray(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}showSkillSelection(){this.skillSelectionActive=!0,this.isPlaying=!1;const t=document.getElementById("skillSelection"),e=document.createElement("div");e.style.position="absolute",e.style.top="10px",e.style.right="10px",e.style.width="20px",e.style.height="20px",e.style.cursor="pointer",e.style.fontSize="20px",e.style.lineHeight="20px",e.style.textAlign="center",e.innerHTML="√ó",e.onclick=()=>{t.style.display="none",this.skillSelectionActive=!1,this.lastUpdateTime=Date.now(),this.isPlaying=!0,requestAnimationFrame(()=>this.gameLoop())},t.appendChild(e);const i=t.getElementsByClassName("skill-option"),s=this.getAvailableSkills();Array.from(i).forEach((l,n)=>{const h=s[n],o=l.querySelector(".skill-icon"),r=l.querySelector(".detail-btn"),m=l.querySelector(".equip-btn");o.innerHTML="",this.drawSkillIcon(o,h),r.onclick=()=>this.showSkillDetail(h),m.onclick=()=>this.equipSkill(h)}),t.style.display="block"}drawSkillIcon(t,e){const i=document.createElement("canvas");i.width=50,i.height=50,t.appendChild(i);const s=i.getContext("2d");switch(s.strokeStyle="#000",s.lineWidth=2,e.id){case"wallPass":const l=i.width*.15;i.width*.2;const n=i.width*.2,h=(i.width-n)/2;s.moveTo(h,i.height*.2),s.lineTo(h+n,i.height*.2),s.lineTo(h+n*.8,i.height*.8),s.lineTo(h-n*.2,i.height*.8),s.closePath(),s.stroke();for(let d=0;d<3;d++){const u=i.height*(.3+d*.2);this.drawArrow(s,i.width*.3,u,l)}break;case"timeStop":const o=i.width*.15,r=i.height*.4;s.fillRect(i.width*.3,i.height*.3,o,r),s.fillRect(i.width*.6,i.height*.3,o,r);break;case"globalLight":s.beginPath(),s.arc(i.width/2,i.height*.4,i.width*.25,0,Math.PI*2),s.moveTo(i.width*.4,i.height*.65),s.lineTo(i.width*.6,i.height*.65),s.moveTo(i.width*.42,i.height*.7),s.lineTo(i.width*.58,i.height*.7),s.moveTo(i.width*.45,i.height*.75),s.lineTo(i.width*.55,i.height*.75),s.stroke();break;case"teleport":const m=i.width*.2;s.beginPath(),s.arc(i.width/2,i.height/2,m,0,Math.PI*2),this.drawArrow(s,i.width*.3,i.height*.3,m,Math.PI*.25),this.drawArrow(s,i.width*.7,i.height*.7,m,-Math.PI*.75),s.stroke();break;case"speedBoost":s.beginPath(),s.moveTo(i.width*.6,i.height*.2),s.lineTo(i.width*.4,i.height*.5),s.lineTo(i.width*.5,i.height*.5),s.lineTo(i.width*.3,i.height*.8),s.lineTo(i.width*.7,i.height*.5),s.lineTo(i.width*.5,i.height*.5),s.closePath(),s.fill();break;case"timeBoots":s.beginPath(),s.arc(i.width/2,i.height/2,i.width*.3,0,Math.PI*2),s.moveTo(i.width/2,i.height/2),s.lineTo(i.width*.7,i.height*.5),s.stroke();break;case"cornerSlow":const c=i.width*.2;s.strokeRect(i.width/2-c/2,0,c,i.height),s.strokeRect(0,i.height/2-c/2,i.width,c);break}e.type==="active"&&e.uses!==void 0&&(s.fillStyle="#000",s.font="12px Arial",s.textAlign="right",s.textBaseline="bottom",s.fillText(e.uses,i.width-2,i.height-2)),t.innerHTML="",t.appendChild(i),i.style.width="100%",i.style.height="100%"}drawArrow(t,e,i,s,l=0){t.save(),t.translate(e,i),t.rotate(l),t.beginPath(),t.moveTo(-s/2,0),t.lineTo(s/2,0),t.lineTo(s/4,-s/4),t.moveTo(s/2,0),t.lineTo(s/4,s/4),t.stroke(),t.restore()}showSkillDetail(t){alert(t.description)}equipSkill(t){if(!t||!t.id)return;let e=this.skillSlots.findIndex(i=>i===null);if(e===-1){this.showReplaceSkillDialog(t);return}this.skillSlots[e]={...t,id:t.id},this.updateSkillSlots(),document.getElementById("skillSelection").style.display="none",this.skillSelectionActive=!1,this.lastUpdateTime=Date.now(),this.isPlaying=!0,requestAnimationFrame(()=>this.gameLoop())}showReplaceSkillDialog(t){const e=document.createElement("div");e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.backgroundColor="white",e.style.padding="20px",e.style.borderRadius="10px",e.style.boxShadow="0 0 10px rgba(0,0,0,0.5)",e.style.zIndex="1000";const i=document.createElement("div");i.textContent="Replace which skill?",i.style.marginBottom="20px",i.style.textAlign="center",e.appendChild(i);const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-around",s.style.gap="10px",this.skillSlots.forEach((n,h)=>{const o=document.createElement("div");o.style.cursor="pointer",o.style.padding="10px",o.style.border="1px solid black",o.style.borderRadius="5px";const r=document.createElement("div");r.style.width="50px",r.style.height="50px",this.drawSkillIcon(r,n),o.appendChild(r),o.onclick=()=>{this.skillSlots[h]={...t,id:t.id},this.updateSkillSlots(),e.remove(),document.getElementById("skillSelection").style.display="none",this.skillSelectionActive=!1,this.lastUpdateTime=Date.now(),this.isPlaying=!0,requestAnimationFrame(()=>this.gameLoop())},s.appendChild(o)}),e.appendChild(s);const l=document.createElement("div");l.style.position="absolute",l.style.top="10px",l.style.right="10px",l.style.width="20px",l.style.height="20px",l.style.cursor="pointer",l.style.fontSize="20px",l.style.lineHeight="20px",l.style.textAlign="center",l.innerHTML="√ó",l.onclick=()=>{e.remove(),document.getElementById("skillSelection").style.display="none",this.skillSelectionActive=!1,this.lastUpdateTime=Date.now(),this.isPlaying=!0,requestAnimationFrame(()=>this.gameLoop())},e.appendChild(l),document.body.appendChild(e)}updateSkillSlots(){const t=document.getElementsByClassName("skill-slot");Array.from(t).forEach((e,i)=>{e.innerHTML="",this.skillSlots[i]&&this.drawSkillIcon(e,this.skillSlots[i])})}useSkill(t){if(!this.isPlaying||!this.skillSlots[t])return;const e=this.skillSlots[t];if(e.id==="globalLight"&&!["fog","lightning","breadcrumb"].includes(this.currentSpecialLevel))return;let i=!0;e.id==="wallPass"?i=e.effect():e.effect(),e.type==="active"&&i&&(e.uses--,e.uses<=0&&(this.skillSlots[t]=null),this.updateSkillSlots())}useWallPass(){const t=this.ball.acceleration.x,e=this.ball.acceleration.y,i=Math.sqrt(t*t+e*e);if(i===0)return!1;const s=t/i,l=e/i,n=Math.floor(this.ball.x/this.cellSize),h=Math.floor(this.ball.y/this.cellSize),o=[{dx:1,dy:0,angle:0},{dx:0,dy:1,angle:Math.PI/2},{dx:-1,dy:0,angle:Math.PI},{dx:0,dy:-1,angle:-Math.PI/2}];let r=null,m=Math.PI;const c=Math.atan2(l,s);if(o.forEach(d=>{const u=n+d.dx,p=h+d.dy;if(u>=0&&u<this.maze[0].length&&p>=0&&p<this.maze.length&&this.maze[p][u]===1){let g=Math.abs(d.angle-c);g>Math.PI&&(g=2*Math.PI-g),g<m&&(m=g,r=d)}}),r){const d=n+r.dx*2,u=h+r.dy*2;if(d>=0&&d<this.maze[0].length&&u>=0&&u<this.maze.length&&this.maze[u][d]===0)return this.ball.x=(d+.5)*this.cellSize,this.ball.y=(u+.5)*this.cellSize,this.ball.velocity.x=0,this.ball.velocity.y=0,!0}return!1}useTimeStop(){this.activeSkillEffects.timeStopActive=!0,this.activeSkillEffects.timeStopRemaining=5e3}useGlobalLight(){if(!["fog","lightning","breadcrumb"].includes(this.currentSpecialLevel))return!1;this.isPlaying=!1;const t=this.currentSpecialLevel;return this.currentSpecialLevel=null,this.draw(),setTimeout(()=>{this.currentSpecialLevel=t,this.lastUpdateTime=Date.now(),this.isPlaying=!0,requestAnimationFrame(()=>this.gameLoop())},5e3),!0}useTeleport(){const t=this.getDistanceToExit(this.ball.x,this.ball.y);let e,i,s=0;const l=100;do{const n=this.getRandomEmptyCell();e=(n.x+.5)*this.cellSize,i=(n.y+.5)*this.cellSize,s++}while(this.getDistanceToExit(e,i)>=t&&s<l);s<l&&(this.ball.x=e,this.ball.y=i)}getDistanceToExit(t,e){const i=(this.endX+.5)*this.cellSize,s=(this.endY+.5)*this.cellSize;return Math.sqrt((t-i)*(t-i)+(e-s)*(e-s))}getRandomEmptyCell(){let t,e;do t=Math.floor(Math.random()*this.maze[0].length),e=Math.floor(Math.random()*this.maze.length);while(this.maze[e][t]!==0);return{x:t,y:e}}applySpeedBoost(){}applyTimeBoots(){}applyCornerSlow(){}hasPassiveSkill(t){return this.skillSlots.some(e=>e&&e.id===t)}isIntersection(t,e){let i=0;return e>0&&this.maze[e-1][t]===0&&i++,e<this.maze.length-1&&this.maze[e+1][t]===0&&i++,t>0&&this.maze[e][t-1]===0&&i++,t<this.maze[0].length-1&&this.maze[e][t+1]===0&&i++,i>2}confirmBack(){confirm("Do you want to return to the start page?")&&this.returnToStart()}returnToStart(){this.startPage.style.display="flex",this.startGameButton.style.display="block",this.modeSelect.style.display="none",document.getElementById("game-container").style.display="none",this.backButton.style.display="none",this.isPlaying=!1,this.resetGameState()}showEffectEndIndicator(){const t=document.createElement("div");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.padding="10px",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.borderRadius="5px",t.textContent="Light Effect Ended",document.getElementById("game-container").appendChild(t),setTimeout(()=>{t.style.opacity="0",t.style.transition="opacity 0.3s",setTimeout(()=>t.remove(),300)},1e3)}}document.addEventListener("DOMContentLoaded",()=>{try{new G}catch(a){console.error("Game initialization error:",a);const t=document.createElement("div");t.style.textAlign="center",t.style.padding="20px",t.innerHTML="Ê∏∏ÊàèÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Âú®Á≥ªÁªüÊµèËßàÂô®‰∏≠ÊâìÂºÄ",document.body.appendChild(t)}});const st="data:image/svg+xml,%3csvg%20width='160'%20height='60'%20viewBox='0%200%20160%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='160'%20height='60'%20rx='20'%20fill='black'/%3e%3cpath%20d='M88.2%2033.5996H93L103.08%2053.9996H98.28L88.2%2033.5996Z'%20fill='white'/%3e%3crect%20x='54.5999'%20y='31.2002'%20width='4.8'%20height='22.8'%20fill='white'/%3e%3crect%20x='66.6001'%20y='8.40039'%20width='4.8'%20height='45.6'%20fill='white'/%3e%3crect%20x='33'%20y='8.40039'%20width='4.8'%20height='45.6'%20fill='white'/%3e%3crect%20x='45'%20y='8.40039'%20width='4.8'%20height='14.16'%20fill='white'/%3e%3crect%20x='54.5999'%20y='8.40039'%20width='4.8'%20height='14.16'%20fill='white'/%3e%3crect%20x='88.2'%20y='6'%20width='4.8'%20height='27.6'%20fill='white'/%3e%3crect%20x='105.72'%20y='6'%20width='4.8'%20height='27.6'%20fill='white'/%3e%3crect%20x='121.8'%20y='26.1602'%20width='4.8'%20height='7.44'%20fill='white'/%3e%3crect%20x='105.72'%20y='36.4805'%20width='4.8'%20height='17.52'%20fill='white'/%3e%3crect%20x='121.8'%20y='36.4805'%20width='4.8'%20height='17.52'%20fill='white'/%3e%3cpath%20d='M48.12%2031.2002H50.52L46.68%2054.0002H44.28L48.12%2031.2002Z'%20fill='white'/%3e%3cpath%20d='M96.84%2021.1201H99.24L95.4%2054.0001H93L96.84%2021.1201Z'%20fill='white'/%3e%3crect%20x='42.8401'%20y='28.7998'%20width='19.68'%20height='2.4'%20fill='white'/%3e%3crect%20x='42.8401'%20y='40.5596'%20width='19.68'%20height='2.4'%20fill='white'/%3e%3crect%20x='33'%20y='6'%20width='16.8'%20height='2.4'%20fill='white'/%3e%3crect%20x='37.8'%20y='22.5605'%20width='12'%20height='2.4'%20fill='white'/%3e%3crect%20x='54.5999'%20y='22.5605'%20width='12'%20height='2.4'%20fill='white'/%3e%3crect%20x='57'%20y='14.4004'%20width='9.6'%20height='2.4'%20fill='white'/%3e%3crect%20x='37.8'%20y='14.4004'%20width='9.6'%20height='2.4'%20fill='white'/%3e%3crect%20x='54.5999'%20y='6'%20width='16.8'%20height='2.4'%20fill='white'/%3e%3crect%20x='107.4'%20y='31.2002'%20width='19.2'%20height='2.4'%20fill='white'/%3e%3crect%20x='110.52'%20y='36.4805'%20width='11.28'%20height='2.4'%20fill='white'/%3e%3crect%20x='110.52'%20y='50.6396'%20width='11.28'%20height='2.4'%20fill='white'/%3e%3crect%20x='88.2'%20y='18.7207'%20width='14.88'%20height='2.4'%20fill='white'/%3e%3c/svg%3e",lt="data:image/svg+xml,%3csvg%20width='160'%20height='60'%20viewBox='0%200%20160%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='160'%20height='60'%20rx='20'%20fill='black'/%3e%3crect%20x='16'%20y='12'%20width='24'%20height='2.4'%20fill='white'/%3e%3cpath%20d='M36.6667%2014.4004H40L19.3333%2054.0004H16L36.6667%2014.4004Z'%20fill='white'/%3e%3cpath%20d='M28.96%2029.5195H31.7549L40%2053.9995H37.205L28.96%2029.5195Z'%20fill='white'/%3e%3cpath%20d='M69.5201%2011.2803H74.3201L71.9201%2054.0003H67.1201L69.5201%2011.2803Z'%20fill='white'/%3e%3crect%20x='52.48'%20y='6'%20width='4.8'%20height='31.2'%20fill='white'/%3e%3crect%20x='59.6799'%20y='31.2002'%20width='16.8'%20height='2.4'%20fill='white'/%3e%3crect%20x='57.28'%20y='11.2803'%20width='14.88'%20height='2.4'%20fill='white'/%3e%3crect%20x='120.16'%20y='6'%20width='4.8'%20height='48'%20fill='white'/%3e%3crect%20x='86.5601'%20y='31.2002'%20width='24'%20height='2.4'%20fill='white'/%3e%3cpath%20d='M124.24%2027.3604L144.16%2031.2004V33.6004L124.24%2029.7604V27.3604Z'%20fill='white'/%3e%3c/svg%3e",nt="data:image/svg+xml,%3csvg%20width='160'%20height='60'%20viewBox='0%200%20160%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='160'%20height='60'%20rx='20'%20fill='black'/%3e%3cpath%20d='M74.7999%206H79.5999L77.1999%2053.9998H72.3999L74.7999%206Z'%20fill='white'/%3e%3cpath%20d='M77.2%206H79.5999L86.7999%2053.9998H84.3999L77.2%206Z'%20fill='white'/%3e%3crect%20x='74.8'%20y='28.7998'%20width='7.2'%20height='2.39999'%20fill='white'/%3e%3crect%20x='91.5999'%20y='6'%20width='4.8'%20height='47.9998'%20fill='white'/%3e%3crect%20x='96.3999'%20y='6'%20width='4.8'%20height='2.39999'%20fill='white'/%3e%3crect%20x='96.3999'%20y='28.7998'%20width='4.8'%20height='2.39999'%20fill='white'/%3e%3cpath%20d='M101.2%206C103.851%206%20106%208.14903%20106%2010.8V25.1999C106%2027.8509%20103.851%2029.9999%20101.2%2029.9999V6Z'%20fill='white'/%3e%3cpath%20d='M101.2%2030C103.851%2030%20106%2032.149%20106%2034.8V53.9999H101.2V30Z'%20fill='white'/%3e%3crect%20x='58.0002'%20y='6'%20width='4.8'%20height='47.9998'%20fill='white'/%3e%3crect%20x='115.6'%20y='6'%20width='4.8'%20height='47.9998'%20fill='white'/%3e%3crect%20x='53.2'%20y='6'%20width='14.4'%20height='2.39999'%20fill='white'/%3e%3crect%20x='110.8'%20y='6'%20width='14.4'%20height='2.39999'%20fill='white'/%3e%3cpath%20d='M34%2010.8C34%208.14903%2036.149%206%2038.8%206V31.1999C36.149%2031.1999%2034%2029.0508%2034%2026.3999V10.8Z'%20fill='white'/%3e%3cpath%20d='M43.5999%2028.7998C46.2508%2028.7998%2048.3999%2030.9488%2048.3999%2033.5998V49.1997C48.3999%2051.8507%2046.2508%2053.9997%2043.5999%2053.9997V28.7998Z'%20fill='white'/%3e%3cpath%20d='M43.5999%206C46.2508%206%2048.3999%208.14903%2048.3999%2010.8V20.3999H43.5999V6Z'%20fill='white'/%3e%3cpath%20d='M34%2039.5996H38.8V53.9995C36.149%2053.9995%2034%2051.8505%2034%2049.1995V39.5996Z'%20fill='white'/%3e%3crect%20x='38.8'%20y='6'%20width='4.8'%20height='2.39999'%20fill='white'/%3e%3crect%20x='38.8'%20y='28.7998'%20width='4.8'%20height='2.39999'%20fill='white'/%3e%3crect%20x='38.8'%20y='51.5996'%20width='4.8'%20height='2.39999'%20fill='white'/%3e%3c/svg%3e";async function at(){const a=document.documentElement.lang,t=a==="en"?"zh":a==="zh"?"ja":"en";document.documentElement.lang=t;const e=document.getElementById("startGameButton");t==="zh"?e.src=st:t==="ja"?e.src=lt:e.src=nt,console.log(`Language switched to: ${t}`)}document.getElementById("languageSwitchButton").addEventListener("click",at);export{U as W};
